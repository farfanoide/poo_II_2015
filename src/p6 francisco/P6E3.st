Object subclass: #Customer	instanceVariableNames: 'name rentals'	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!Customer methodsFor: 'accessing' stamp: ' 6/5/15 16:03'!rentals	^rentals! !!Customer methodsFor: 'accessing' stamp: ' 6/5/15 16:03'!name: aString	name := aString! !!Customer methodsFor: 'accessing' stamp: ' 6/5/15 16:03'!name	^name! !!Customer methodsFor: 'accessing' stamp: ' 6/5/15 16:03'!addRental: aRental 	self rentals add: aRental! !!Customer methodsFor: 'initialize-release' stamp: ' 6/5/15 16:03'!initialize	rentals := OrderedCollection new.	^self! !!Customer methodsFor: 'operations' stamp: ' 6/5/15 16:03'!totalCharge	^self rentals inject: 0 into: [:total :rental | total + rental charge]! !!Customer methodsFor: 'operations' stamp: ' 6/5/15 16:03'!totalFrequentRenterPoints	^self rentals inject: 0		into: [:total :rental | total + rental frequentRenterPoints]! !!Customer methodsFor: 'printing' stamp: 'francisco 6/9/2015 21:53'!statement	| result |	result := ClassicStatement new.		^result print: self.! !!Customer methodsFor: 'printing' stamp: 'francisco 6/9/2015 21:55'!htmlStatement	| result |		result:= HTMLStatement new.		^result print: self.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Customer class	instanceVariableNames: ''!!Customer class methodsFor: 'instance creation' stamp: ' 6/5/15 16:03'!named: aString 	^self new name: aString! !!Customer class methodsFor: 'instance creation' stamp: ' 6/5/15 16:03'!new	^super new initialize! !Object subclass: #Movie	instanceVariableNames: 'title price'	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!Movie methodsFor: 'initialize-release' stamp: ' 6/5/15 15:57'!initialize	price := RegularPrice new! !!Movie methodsFor: 'accessing' stamp: ' 6/5/15 15:57'!charge: days 	^self price charge: days! !!Movie methodsFor: 'accessing' stamp: ' 6/5/15 15:57'!price: aPrice	price := aPrice! !!Movie methodsFor: 'accessing' stamp: ' 6/5/15 15:57'!title: aString	title := aString! !!Movie methodsFor: 'accessing' stamp: ' 6/5/15 15:57'!price	^price! !!Movie methodsFor: 'accessing' stamp: ' 6/5/15 15:57'!title	^title! !!Movie methodsFor: 'accessing' stamp: ' 6/5/15 15:57'!frequentRenterPoints: days	^self price frequentRenterPoints: days! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Movie class	instanceVariableNames: ''!!Movie class methodsFor: 'instance creation' stamp: ' 6/5/15 15:57'!new	^super new initialize! !!Movie class methodsFor: 'instance creation' stamp: ' 6/5/15 15:57'!newReleaseTitled: aString 	^(self new)		title: aString;		price: NewReleasePrice new! !!Movie class methodsFor: 'instance creation' stamp: ' 6/5/15 15:57'!titled: aString	^self new title: aString! !Object subclass: #Price	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!Price methodsFor: 'pricing' stamp: ' 6/5/15 15:56'!charge: days	^self price * days! !!Price methodsFor: 'pricing' stamp: ' 6/5/15 15:56'!frequentRenterPoints: days 	^days! !!Price methodsFor: 'pricing' stamp: ' 6/5/15 15:56'!price	^5! !Price subclass: #ChildrensPrice	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!ChildrensPrice methodsFor: 'pricing' stamp: ' 6/5/15 16:00'!frequentRenterPoints: days 	^0! !!ChildrensPrice methodsFor: 'pricing' stamp: ' 6/5/15 16:00'!price	^3! !Price subclass: #NewReleasePrice	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!NewReleasePrice methodsFor: 'pricing' stamp: ' 6/5/15 15:57'!price	^7! !Object subclass: #Statement	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!Statement commentStamp: '<historical>' prior: 0!Clase Statement!!Statement methodsFor: 'mensajes' stamp: 'francisco 6/8/2015 10:13'!totalFrequentRenterPoints: aCustomer 	^self subclassResponsibility! !!Statement methodsFor: 'mensajes' stamp: 'francisco 6/8/2015 10:14'!name: aCustomer 	^self subclassResponsibility! !!Statement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:47'!print: aCustomer 	^((self name: aCustomer) , (self rentals: aCustomer) 		, (self totalCharge: aCustomer) 			, (self totalFrequentRenterPoints: aCustomer))withCRs.! !!Statement methodsFor: 'mensajes' stamp: 'francisco 6/8/2015 10:11'!rentals: aCustomer 	^self subclassResponsibility! !!Statement methodsFor: 'mensajes' stamp: 'francisco 6/8/2015 10:15'!totalCharge:aCustomer	^self subclassResponsibility! !Statement subclass: #ClassicStatement	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!ClassicStatement commentStamp: '<historical>' prior: 0!Classic Statement subClass Statement!!ClassicStatement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:24'!totalFrequentRenterPoints: aCustomer 	^'You earned ' , aCustomer totalFrequentRenterPoints printString , ' frequent renter points.'.! !!ClassicStatement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:19'!name: aCustomer 	^ 'Rental Record for ' , aCustomer name , '\' .! !!ClassicStatement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:20'!totalCharge:aCustomer	^'Amount owed is ' , aCustomer totalCharge printString , '\'.! !!ClassicStatement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:31'!rentals: aCustomer 	|result|	result:= ''.	aCustomer rentals do: [:aRental | result := result , aRental movie title , ' ' , aRental charge printString, '\'].	^result.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!ClassicStatement class	instanceVariableNames: ''!!ClassicStatement class methodsFor: 'as yet unclassified' stamp: 'francisco 6/9/2015 21:29'!new	^ super new! !TestCase subclass: #CustomerTest	instanceVariableNames: 'noRentals oneRental fiveRentals'	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!CustomerTest methodsFor: 'accessing' stamp: ' 6/5/15 16:03'!noRentals	^noRentals! !!CustomerTest methodsFor: 'accessing' stamp: ' 6/5/15 16:03'!fiveRentals	^fiveRentals! !!CustomerTest methodsFor: 'accessing' stamp: ' 6/5/15 16:03'!oneRental	^oneRental! !!CustomerTest methodsFor: 'testing' stamp: ' 6/5/15 16:03'!testStatement	self assert: noRentals statement 				= 'Rental Record for Arturo\Amount owed is 0\You earned 0 frequent renter points.' 						withCRs.	self assert: oneRental statement 				= 'Rental Record for Leandro\Deathproof 14\Amount owed is 14\You earned 2 frequent renter points.' 						withCRs.	self assert: fiveRentals statement 				= 'Rental Record for Andres\Reservoir Dogs 5\Pulp Fiction 10\Jackie Brown 15\Kill Bill 10\Deathproof 14\Amount owed is 54\You earned 6.0 frequent renter points.' 						withCRs.! !!CustomerTest methodsFor: 'testing' stamp: ' 6/5/15 16:03'!testHtmlStatement	self assert: noRentals htmlStatement 				= '<H1>Rentals for <EM>Arturo </EM></H1><P>\<P>You owe <EM> 0</EM><P>\On this rental you earned <EM> 0 </EM> frequent renter points<P>\' 						withCRs.	self assert: oneRental htmlStatement 				= '<H1>Rentals for <EM>Leandro </EM></H1><P>\Deathproof: 14<BR>\<P>You owe <EM> 14</EM><P>\On this rental you earned <EM> 2 </EM> frequent renter points<P>\' 						withCRs.	self assert: fiveRentals htmlStatement 				= '<H1>Rentals for <EM>Andres </EM></H1><P>\Reservoir Dogs: 5<BR>\Pulp Fiction: 10<BR>\Jackie Brown: 15<BR>\Kill Bill: 10<BR>\Deathproof: 14<BR>\<P>You owe <EM> 54</EM><P>\On this rental you earned <EM> 6.0 </EM> frequent renter points<P>\' 						withCRs! !!CustomerTest methodsFor: 'running' stamp: ' 6/5/15 16:03'!setUp	| reservoirDogs pulpFiction jackieBrown killBill deathproof |	reservoirDogs := Movie titled: 'Reservoir Dogs'.	pulpFiction := Movie titled: 'Pulp Fiction'.	jackieBrown := Movie titled: 'Jackie Brown'.	killBill := Movie titled: 'Kill Bill'.	deathproof := Movie newReleaseTitled: 'Deathproof'.	noRentals := Customer named: 'Arturo'.	oneRental := (Customer named: 'Leandro') 				addRental: (Rental of: deathproof for: 2).	fiveRentals := (Customer named: 'Andres')				addRental: (Rental of: reservoirDogs for: 1);				addRental: (Rental of: pulpFiction for: 2);				addRental: (Rental of: jackieBrown for: 3);				addRental: (Rental of: killBill for: 2);				addRental: (Rental of: deathproof for: 2)! !Statement subclass: #HTMLStatement	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!HTMLStatement commentStamp: '<historical>' prior: 0!HTML Statement subClass Statement!!HTMLStatement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:22'!totalFrequentRenterPoints: aCustomer 	^'On this rental you earned <EM> ', aCustomer totalFrequentRenterPoints printString , ' </EM> frequent renter points<P>\'  withCRs.! !!HTMLStatement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:18'!name: aCustomer 	^ '<H1>Rentals for <EM>' , aCustomer name , ' </EM></H1><P>\'  withCRs.! !!HTMLStatement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:21'!totalCharge:aCustomer	^ '<P>You owe <EM> ' , aCustomer totalCharge printString , '</EM><P>\'  withCRs.! !!HTMLStatement methodsFor: 'mensajes' stamp: 'francisco 6/9/2015 18:48'!rentals: aCustomer 	|result|		result:= ''.		aCustomer rentals do: [:aRental | result := result , aRental movie title , ': ' , aRental charge printString , '<BR>\'].		^result.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!HTMLStatement class	instanceVariableNames: ''!!HTMLStatement class methodsFor: 'as yet unclassified' stamp: 'francisco 6/9/2015 21:29'!new	^ super new! !Price subclass: #RegularPrice	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!RegularPrice methodsFor: 'pricing' stamp: ' 6/5/15 15:56'!frequentRenterPoints: days 	^days * 0.5! !Object subclass: #Rental	instanceVariableNames: 'movie days'	classVariableNames: ''	poolDictionaries: ''	category: 'Objetos2Practica6-Ejercicio 3'!!Rental methodsFor: 'accessing' stamp: ' 6/5/15 15:56'!charge	^self movie charge: self days! !!Rental methodsFor: 'accessing' stamp: ' 6/5/15 15:56'!days	^days! !!Rental methodsFor: 'accessing' stamp: ' 6/5/15 15:56'!days: numberOfDays	days := numberOfDays! !!Rental methodsFor: 'accessing' stamp: ' 6/5/15 15:56'!movie	^movie! !!Rental methodsFor: 'accessing' stamp: ' 6/5/15 15:56'!movie: aMovie	movie := aMovie! !!Rental methodsFor: 'accessing' stamp: ' 6/5/15 15:56'!frequentRenterPoints	^self movie frequentRenterPoints: self days! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!Rental class	instanceVariableNames: ''!!Rental class methodsFor: 'instance creation' stamp: ' 6/5/15 15:56'!of: aMovie for: numberOfDays	^(self new)		movie: aMovie;		days: numberOfDays! !